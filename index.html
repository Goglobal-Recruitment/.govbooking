<script>
  const countryLocations = {
    'Eswatini': ['Mbabane', 'Manzini', 'Lobamba'],
    'South Africa': ['Pretoria', 'Johannesburg', 'Cape Town'],
    'Kenya': ['Nairobi', 'Mombasa', 'Kisumu'],
    'Ghana': ['Accra', 'Kumasi', 'Tamale'],
    'Nigeria': ['Lagos', 'Abuja', 'Port Harcourt'],
  };

  const officeLocations = {
    'Mbabane': ['Main Office', 'Regional Office 1', 'Regional Office 2'],
    'Manzini': ['Main Office', 'Branch 1', 'Branch 2'],
    'Lobamba': ['Main Office'],
    'Pretoria': ['Main Office', 'Branch 1', 'Branch 2'],
    'Johannesburg': ['Main Office', 'Branch 1'],
    'Cape Town': ['Main Office'],
    'Nairobi': ['Main Office', 'Branch 1'],
    'Mombasa': ['Main Office'],
    'Kisumu': ['Branch 1'],
    'Accra': ['Main Office', 'Branch 1'],
    'Kumasi': ['Branch 1'],
    'Tamale': ['Branch 1'],
    'Lagos': ['Main Office', 'Branch 1', 'Branch 2'],
    'Abuja': ['Main Office'],
    'Port Harcourt': ['Branch 1'],
  };

  function updateLocations() {
    const country = document.getElementById('country').value;
    const locationSelect = document.getElementById('location');
    const officeSelect = document.getElementById('office');

    locationSelect.innerHTML = '<option value="">Select Location</option>';
    officeSelect.innerHTML = '<option value="">Select Office</option>';

    if (countryLocations[country]) {
      countryLocations[country].forEach(location => {
        const option = document.createElement('option');
        option.value = location;
        option.textContent = location;
        locationSelect.appendChild(option);
      });
    }
  }

  function updateOffices() {
    const location = document.getElementById('location').value;
    const officeSelect = document.getElementById('office');
    officeSelect.innerHTML = '<option value="">Select Office</option>';
    if (officeLocations[location]) {
      officeLocations[location].forEach(office => {
        const option = document.createElement('option');
        option.value = office;
        option.textContent = office;
        officeSelect.appendChild(option);
      });
    }
  }

  function goToSummary(event) {
    event.preventDefault();
    let form = document.getElementById('bookingForm');
    let allValid = true;

    // Check all required inputs and selects
    form.querySelectorAll('input[required], select[required]').forEach(el => {
      if (el.type === 'radio') {
        const radios = form.querySelectorAll(`input[name="${el.name}"]`);
        const checked = Array.from(radios).some(r => r.checked);
        if (!checked) {
          radios.forEach(r => r.parentElement.style.color = 'red'); // highlight label
          allValid = false;
        } else {
          radios.forEach(r => r.parentElement.style.color = 'black');
        }
      } else {
        if (!el.value) {
          el.style.borderColor = 'red';
          allValid = false;
        } else {
          el.style.borderColor = '#ccc';
        }
      }
    });

    if (!allValid) {
      alert('⚠️ Complete all fields.');
      return false;
    }

    window.location.href = 'summary.html';
  }
</script>
