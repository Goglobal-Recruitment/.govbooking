<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visa Application</title>
<style>
body {font-family: Arial,sans-serif;background:#f0f4f8;padding:20px;}
h1,h2 {color:#0a6b3b;text-align:center;}
form {max-width:900px;margin:0 auto;background:#fff;padding:2rem;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
label {font-weight:600;margin-top:10px;display:block;}
input,select {width:100%;padding:10px;margin-bottom:15px;border-radius:6px;border:1px solid #ccc;}
button {padding:12px 20px;background:#0a6b3b;color:#fff;border:none;border-radius:6px;cursor:pointer;margin-top:15px;}
button:hover {background:#2a8a55;}
.hidden {display:none;}
</style>
</head>
<body>

<h1>Visa Application</h1>
<form id="visaForm">

<label for="booking_reference">Booking Reference</label>
<input type="text" id="booking_reference" readonly>

<label for="id_number">ID Number</label>
<input type="text" id="id_number" name="id_number" required>

<label for="forenames">Forenames</label>
<input type="text" id="forenames" name="forenames" required>

<label for="surname">Surname</label>
<input type="text" id="surname" name="surname" required>

<label for="contact">Contact Number</label>
<div style="display:flex; gap:10px;">
<select id="country_code">
<option value="+27">+27 (ZA)</option>
<option value="+44">+44 (UK)</option>
<option value="+61">+61 (AU)</option>
<option value="+1">+1 (US)</option>
</select>
<input type="tel" id="contact" name="contact" required>
</div>

<label for="email">Email</label>
<input type="email" id="email" name="email" required>

<h2>Address</h2>
<label for="street_address">Street Address</label>
<input type="text" id="street_address" name="street_address" required>

<label for="country">Country</label>
<select id="country" name="country" required></select>

<label for="province">Province/State</label>
<select id="province" name="province" required></select>

<label for="city">City</label>
<select id="city" name="city" required></select>

<label for="postal_code">Postal Code</label>
<input type="text" id="postal_code" name="postal_code" required>

<h2>Passport</h2>
<label>Do you have a passport?</label>
<input type="radio" name="passport_status" value="yes"> Yes
<input type="radio" name="passport_status" value="no"> No

<div id="passport-yes" class="hidden">
<label for="passport_number">Passport Number</label>
<input type="text" id="passport_number" name="passport_number">
<label for="passport_issue_date">Issue Date</label>
<input type="date" id="passport_issue_date" name="passport_issue_date">
<label for="passport_expiry_date">Expiry Date</label>
<input type="date" id="passport_expiry_date" name="passport_expiry_date">
<label for="passport_proof">Upload Passport Proof</label>
<input type="file" id="passport_proof" name="passport_proof">
</div>

<div id="passport-no" class="hidden">
<label>Do you want to apply for a passport?</label>
<input type="radio" name="passport_apply" value="yes"> Yes
<input type="radio" name="passport_apply" value="no"> No

<div id="passport-apply-info" class="hidden">
<label for="passport_apply_date">Intended Issue Date</label>
<input type="date" id="passport_apply_date" name="passport_apply_date">
<label for="passport_identity_upload">Upload Identity Document</label>
<input type="file" id="passport_identity_upload" name="passport_identity_upload">
</div>
</div>

<h2>Spouse</h2>
<label>Include Spouse?</label>
<input type="radio" name="spouse_include" value="yes"> Yes
<input type="radio" name="spouse_include" value="no"> No

<div id="spouse-section" class="hidden">
<label for="spouse_name">Spouse Name</label>
<input type="text" id="spouse_name" name="spouse_name">
<label for="spouse_age">Spouse Age</label>
<input type="number" id="spouse_age" name="spouse_age">
<label for="spouse_id_upload">Upload Identity Document</label>
<input type="file" id="spouse_id_upload" name="spouse_id_upload">
<label for="spouse_medical_upload">Upload Medical Records</label>
<input type="file" id="spouse_medical_upload" name="spouse_medical_upload">
</div>

<h2>Children</h2>
<label>Include Children?</label>
<input type="radio" name="children_include" value="yes"> Yes
<input type="radio" name="children_include" value="no"> No

<div id="children-section" class="hidden">
<label for="child_count">Number of Children</label>
<select id="child_count">
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select>
<div id="children-details"></div>
</div>

<button type="submit">Submit Visa Application</button>
</form>

<script>
// Dynamic global countries & example provinces/cities
const countriesData = {
  'Australia': { provinces: { 'New South Wales': ['Sydney','Newcastle'], 'Victoria': ['Melbourne','Geelong'] } },
  'United Kingdom': { provinces: { 'England': ['London','Manchester'], 'Scotland': ['Edinburgh','Glasgow'] } },
  'United States': { provinces: { 'California': ['Los Angeles','San Francisco'], 'New York': ['New York City','Buffalo'] } },
  'South Africa': { provinces: { 'Gauteng': ['Johannesburg','Pretoria'], 'Western Cape': ['Cape Town'] } },
  'Canada': { provinces: { 'Ontario': ['Toronto','Ottawa'], 'Quebec': ['Montreal','Quebec City'] } }
};

const countrySelect = document.getElementById('country');
const provinceSelect = document.getElementById('province');
const citySelect = document.getElementById('city');

// Populate countries
Object.keys(countriesData).forEach(c=>{
  const opt=document.createElement('option'); opt.value=c; opt.textContent=c; countrySelect.appendChild(opt);
});

// Country -> province
countrySelect.addEventListener('change',()=>{
  provinceSelect.innerHTML='<option value="">Select Province/State</option>';
  citySelect.innerHTML='<option value="">Select City</option>';
  postal_code.value='';
  if(!countrySelect.value) return;
  const provinces = Object.keys(countriesData[countrySelect.value].provinces);
  provinces.forEach(p=>{const o=document.createElement('option');o.value=p;o.textContent=p;provinceSelect.appendChild(o);});
});

// Province -> city
provinceSelect.addEventListener('change',()=>{
  citySelect.innerHTML='<option value="">Select City</option>';
  postal_code.value='';
  if(!provinceSelect.value) return;
  const cities = countriesData[countrySelect.value].provinces[provinceSelect.value];
  cities.forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;citySelect.appendChild(o);});
});

// City -> show postal code input
citySelect.addEventListener('change',()=>{postal_code.value='';});

// Passport logic
document.querySelectorAll('input[name="passport_status"]').forEach(input=>{
  input.addEventListener('change',()=>{
    passportYes.classList.toggle('hidden', input.value!=='yes');
    passportNo.classList.toggle('hidden', input.value!=='no');
    passportApplyInfo.classList.add('hidden');
  });
});
document
