<script>
  const form = document.getElementById('bookingForm');

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    // Collect values
    const idNumber = form.id_number.value.trim();
    const forenames = form.forenames.value.trim();
    const surname = form.surname.value.trim();
    const dialingCode = form.dialing_code.value;
    const cellphone = form.cellphone.value.trim();
    const confirmDialingCode = form.confirm_dialing_code.value;
    const confirmCellphone = form.confirm_cellphone.value.trim();
    const email = form.email.value.trim();
    const confirmEmail = form.confirm_email.value.trim();

    // Basic validation
    if (!idNumber || !forenames || !surname || !cellphone || !confirmCellphone) {
      alert("Please fill in all required fields.");
      return;
    }

    if (cellphone !== confirmCellphone || dialingCode !== confirmDialingCode) {
      alert("Cellphone numbers do not match.");
      return;
    }

    if (email && email !== confirmEmail) {
      alert("Emails do not match.");
      return;
    }

    // TODO: Call backend authentication endpoint
    // Example placeholder:
    fetch("https://your-backend-url.com/auth", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        id_number: idNumber,
        forenames,
        surname,
        phone: dialingCode + cellphone,
        email,
      }),
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        // Redirect to next step page
        window.location.href = "next-step.html";
      } else {
        alert("Authentication failed. Please try again.");
      }
    })
    .catch(err => {
      console.error(err);
      alert("Server error. Please try again later.");
    });
  });
</script>
